<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>åƒç´ é»‘çŒ«å…»æˆè®¡åˆ’</title>
  <style>
    body {
      background: #222;
      color: #fff;
      font-family: "Arial", sans-serif;
      text-align: center;
      padding: 30px;
    }
    #cat {
      image-rendering: pixelated;
      width: 128px;
      height: 128px;
      margin: 0 auto;
    }
    .btn {
      margin: 10px;
      padding: 10px 20px;
      background: #444;
      color: #fff;
      border: none;
      cursor: pointer;
      border-radius: 8px;
    }
    #log {
      margin-top: 20px;
      padding: 10px;
      background: #111;
      border: 1px solid #555;
      height: 200px;
      overflow-y: auto;
    }
    #inputArea {
      margin-top: 20px;
    }
    input[type="text"] {
      padding: 8px;
      width: 200px;
    }
  </style>
</head>
<body>
  <h1>åƒç´ é»‘çŒ«å…»æˆè®¡åˆ’</h1>
  <img id="cat" src="https://i.imgur.com/6WQWjCv.png" alt="pixel black cat" />
  <div>
    <button class="btn" onclick="interactWithCat()">æ‘¸æ‘¸</button>
    <button class="btn" onclick="buyFood()">ä¹°é£Ÿç‰©</button>
    <button class="btn" onclick="goWork()">æ‰“å·¥</button>
    <button class="btn" onclick="writeDiary()">å†™æ—¥è®°</button>
  </div>
  <div id="log"></div>

  <div id="inputArea">
    <input id="userInput" type="text" placeholder="å’ŒçŒ«çŒ«è¯´è¯...">
    <button class="btn" onclick="chat()">å‘é€</button>
  </div>

  <script>
    const API_KEY = "åœ¨è¿™é‡Œå¡«å…¥ä½ çš„Gemini API Key";

    function appendLog(text, role = "cat") {
      const log = document.getElementById("log");
      const p = document.createElement("p");
      p.textContent = role === "user" ? `ä½ ï¼š${text}` : `é»‘çŒ«ï¼š${text}`;
      log.appendChild(p);
      log.scrollTop = log.scrollHeight;
    }

    async function chat() {
      const input = document.getElementById("userInput");
      const message = input.value.trim();
      if (!message) return;
      appendLog(message, "user");
      input.value = "";

      const res = await fetch(
        `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`,
        {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            contents: [{ role: "user", parts: [{ text: `ä½ æ˜¯ä¸€åªå«å¢¨å¢¨çš„é»‘çŒ«ï¼Œè¯·ä»¥æ‹Ÿäººé£æ ¼ç”¨ä¸­æ–‡å›ç­”ï¼š${message}` }] }]
          })
        }
      );

      const data = await res.json();
      const reply = data?.candidates?.[0]?.content?.parts?.[0]?.text || "å–µ...æˆ‘ç°åœ¨è¯´ä¸å‡ºè¯ã€‚";
      appendLog(reply);
    }

    function interactWithCat() {
      appendLog("å””...ä½ çªç„¶æ‘¸æˆ‘å¹²ä»€ä¹ˆâ€¦â€¦ä¸è¿‡ï¼Œä¸è®¨åŒã€‚â˜ï¸");
    }

    function buyFood() {
      appendLog("ä½ ä¹°äº†å°é±¼å¹²ï¼Œå¢¨å¢¨å–µäº†ä¸€å£°ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹å¼€å¿ƒã€‚ğŸ™");
    }

    function goWork() {
      const works = [
        "åœ¨é­”æ³•å›¾ä¹¦é¦†å¸®å¿™åˆ†ç±»ä¹¦ç±ï¼Œå·®ç‚¹è¢«å°å°ã€‚ğŸ“–",
        "åœ¨å’–å•¡åº—æ‰“å·¥ï¼Œè¢«ä¸‰ä¸ªäººç±»æ‘¸äº†è€³æœµï¼Œå¿ƒæƒ…å¤æ‚ã€‚â˜•ï¸",
        "åœ¨ç›´æ’­é—´è£…èŒçŒ«ï¼Œèµšäº†ä¸¤å°è¢‹çŒ«ç²®ã€‚ğŸ±"
      ];
      const result = works[Math.floor(Math.random() * works.length)];
      appendLog(`å¢¨å¢¨å»æ‰“å·¥äº†ï¼š${result}`);
    }

    async function writeDiary() {
      const res = await fetch(
        `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`,
        {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            contents: [
              {
                role: "user",
                parts: [
                  {
                    text: `ä½ æ˜¯ä¸€åªå¯ä»¥å˜æˆäººçš„åƒç´ é£é»‘çŒ«ï¼Œåå­—å«å¢¨å¢¨ã€‚è¯·ç”¨ç¬¬ä¸€äººç§°å†™ä¸€ç¯‡ä»Šå¤©çš„æ—¥è®°ï¼Œç”¨ä¸­æ–‡ï¼Œé£æ ¼è½»æ¾æ¸©æŸ”ï¼Œä¸è¦æåŠAIæˆ–äººç±»æ“ä½œã€‚`
                  }
                ]
              }
            ]
          })
        }
      );

      const data = await res.json();
      const diary = data?.candidates?.[0]?.content?.parts?.[0]?.text || "ä»Šå¤©æ²¡å†™æˆæ—¥è®°...";
      appendLog(diary);
    }
  </script>
</body>
</html>
